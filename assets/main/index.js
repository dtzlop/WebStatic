System.register("chunks:///_virtual/ConfigManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SingletonT.ts","./ResourceManager.ts"],(function(t){"use strict";var n,e,r,a,s,o,i;return{setters:[function(t){n=t.inheritsLoose,e=t.asyncToGenerator,r=t.regeneratorRuntime},function(t){a=t.cclegacy,s=t._decorator},function(t){o=t.SingletonF},function(t){i=t.ResourceManager}],execute:function(){var u;t("ConfigName",void 0),a._RF.push({},"3e389f28HhKVpbm9AyXFSo4","ConfigManager",void 0);var c,f=s.ccclass;!function(t){t.Punish="config-punish"}(c||(c=t("ConfigName",{})));t("ConfigManager",f("ConfigManager")(u=function(t){function a(){for(var n,e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return(n=t.call.apply(t,[this].concat(r))||this)._dataMap=new Map,n}n(a,t);var s=a.prototype;return s.LoadCsv=function(){var t=e(r().mark((function t(n){var e,a;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("开始加载配置:",n),t.next=3,i.Instance.LoadConfig(n);case 3:return e=t.sent,a=this.parseCsv(e.text),this._dataMap.set(n,a),console.log("加载到的数据是",a),t.abrupt("return",a);case 8:case"end":return t.stop()}}),t,this)})));return function(n){return t.apply(this,arguments)}}(),s.LoadCsv2=function(){var t=e(r().mark((function t(n){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("LoadCsv called with path:",n);case 1:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),s.GetCsvData=function(){var t=e(r().mark((function t(n){var e;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this._dataMap.get(n)){t.next=5;break}return t.next=4,this.LoadCsv(n);case 4:e=t.sent;case 5:return t.abrupt("return",e);case 6:case"end":return t.stop()}}),t,this)})));return function(n){return t.apply(this,arguments)}}(),s.parseCsv=function(t,n){void 0===n&&(n=1);for(var e=t.trim().split(/\r?\n/),r=e[0].split(","),a=[],s=1+n;s<e.length;s++){var o=e[s].split(",");if(o.length===r.length){for(var i={},u=0;u<o.length;u++)i[r[u].trim()]=o[u].trim();a.push(i)}}return a},s.GetCsvItemById=function(){var t=e(r().mark((function t(n,e){var a,s,o;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.GetCsvData(e);case 2:if(a=t.sent){t.next=7;break}return t.next=6,this.LoadCsv(e);case 6:a=t.sent;case 7:s=0;case 8:if(!(s<a.length)){t.next=15;break}if((o=a[s]).Id!==n){t.next=12;break}return t.abrupt("return",o);case 12:s++,t.next=8;break;case 15:return t.abrupt("return",null);case 16:case"end":return t.stop()}}),t,this)})));return function(n,e){return t.apply(this,arguments)}}(),a}(o()))||u);a._RF.pop()}}}));

System.register("chunks:///_virtual/CubeBase.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CubeSon.ts"],(function(t){"use strict";var n,e,o,r,i,s,u,c;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,o=t._decorator,r=t.Color,i=t.MeshRenderer,s=t.RigidBody,u=t.Component},function(t){c=t.CubeSon}],execute:function(){var a;e._RF.push({},"cf642AQPZFOsKSI9SceavC0","CubeBase",void 0);var h=o.ccclass;o.property,t("CubeBase",h("CubeBase")(a=function(t){function e(){for(var n,e=arguments.length,o=new Array(e),i=0;i<e;i++)o[i]=arguments[i];return(n=t.call.apply(t,[this].concat(o))||this)._sonCubeArr=[],n._colorArr=[r.RED,r.GREEN,r.BLUE],n._initPos=void 0,n._initRot=void 0,n.time=0,n}n(e,t);var o=e.prototype;return o.onLoad=function(){for(var t=0;t<this.node.children.length;t++){var n=this.node.children[t].getComponent(c);this._sonCubeArr.push(n)}this.scheduleOnce((function(){}),2)},o.ChangeCubeColor=function(t){void 0===t&&(t=null);for(var n=0;n<this._sonCubeArr.length;n++){var e=this._sonCubeArr[n],o=null==t?this._colorArr[n]:t;e.TankOut&&(o=r.BLACK),e.getComponent(i).materials[0].setProperty("emissive",o)}},o.GetCube=function(t){return this._sonCubeArr[t]},o.start=function(){},o.update=function(t){},o.SetMass=function(t){for(var n=0;n<this._sonCubeArr.length;n++){this._sonCubeArr[n].getComponent(s).mass=t}},o.SetPosRot=function(t,n){null==this._initPos&&(this._initPos=t),null==this._initRot&&(this._initRot=n),this.node.setPosition(t),this.node.setRotationFromEuler(n.x,n.y,n.z)},o.GetSonArr=function(){return this._sonCubeArr},o.ResetPos=function(){},e}(u))||a);e._RF.pop()}}}));

System.register("chunks:///_virtual/CubeSon.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(o){"use strict";var t,i,n,e,r,s;return{setters:[function(o){t=o.inheritsLoose},function(o){i=o.cclegacy,n=o._decorator,e=o.BoxCollider,r=o.RigidBody,s=o.Component}],execute:function(){var u;i._RF.push({},"31a09c/iJBIM4hS/2k/3ZFy","CubeSon",void 0);var c=n.ccclass;n.property,o("CubeSon",c("CubeSon")(u=function(o){function i(){for(var t,i=arguments.length,n=new Array(i),e=0;e<i;e++)n[e]=arguments[e];return(t=o.call.apply(o,[this].concat(n))||this).TankOut=!1,t._boxCollider=void 0,t._rigidyBody=void 0,t._initPos=void 0,t}t(i,o);var n=i.prototype;return n.onLoad=function(){this._boxCollider=this.getComponent(e),this._rigidyBody=this.getComponent(r)},n.SetCollision=function(o){this._rigidyBody.useGravity=o,this._boxCollider.enabled=o},n.start=function(){},n.update=function(o){},i}(s))||u);i._RF.pop()}}}));

System.register("chunks:///_virtual/GlobalEventM.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SingletonT.ts"],(function(e){"use strict";var t,n,o,r,a;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,o=e._decorator,r=e.EventTarget},function(e){a=e.SingletonF}],execute:function(){var l,c;n._RF.push({},"1c8ffoQxVBNwJmiqZghrAff","GlobalEventM",void 0);var u=o.ccclass;o.property,e("GlobalEventM",u("GlobalEvent")(((c=function(e){function n(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(t=e.call.apply(e,[this].concat(o))||this).Camera3dRotate=new r,t.GetRandomLayer=new r,t.ChooseColorCube=new r,t.TakeOutCubeComplete=new r,t.ResetGame=new r,t}return t(n,e),n}(a())).CubeLayerMax=24,l=c))||l);n._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./ConfigManager.ts","./CubeBase.ts","./CubeSon.ts","./GlobalEventM.ts","./ResourceManager.ts","./SceneMaster.ts","./SingletonT.ts","./UIPanelFight.ts","./UIPanelPunish.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/ResourceManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SingletonT.ts"],(function(e){"use strict";var r,n,t,o,i,a,s,c,u,f,l;return{setters:[function(e){r=e.inheritsLoose,n=e.asyncToGenerator,t=e.regeneratorRuntime},function(e){o=e.cclegacy,i=e._decorator,a=e.resources,s=e.Prefab,c=e.instantiate,u=e.SpriteFrame,f=e.TextAsset},function(e){l=e.SingletonF}],execute:function(){var p;o._RF.push({},"7a4feIFwk5B+7mPcKNIqFjg","ResourceManager",void 0);var d=i.ccclass;i.property,e("ResourceManager",d("ResourceManager")(p=function(e){function o(){return e.apply(this,arguments)||this}r(o,e);var i=o.prototype;return i.LoadPrefab=function(e){return new Promise((function(r,n){a.load(e,s,(function(e,t){e?n(e):r(t)}))}))},i.LoadPrefabAndIns=function(e,r,n){return new Promise((function(t,o){a.load(e,s,(function(e,i){if(e)o(e);else{var a=c(i);r.addChild(a),a.setWorldPosition(n),t(a)}}))}))},i.LoadSetSpriteFrame=function(e,r){r+="/spriteFrame",a.load(r,u,(function(r,n){r?console.error("Error loading sprite frame:",r):(e.spriteFrame=n,console.log("SpriteFrame set successfully!"))}))},i.LoadConfig=function(){var e=n(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){a.load(r,f,(function(t,o){if(t)return console.error("config "+r+" 加载失败："+t),void n(t);e(o)}))})));case 1:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),o}(l()))||p);o._RF.pop()}}}));

System.register("chunks:///_virtual/SceneMaster.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CubeBase.ts","./GlobalEventM.ts","./UIPanelPunish.ts"],(function(e){"use strict";var t,o,n,r,u,i,a,s,c,h,C,l,b,p,m,G,_,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){u=e.cclegacy,i=e._decorator,a=e.Node,s=e.input,c=e.Input,h=e.Quat,C=e.Vec3,l=e.RigidBody,b=e.Color,p=e.instantiate,m=e.Component},function(e){G=e.CubeBase},function(e){_=e.GlobalEventM},function(e){d=e.UIPanelPunish}],execute:function(){var f,v,y,g,I,R,P,A,S,T,L,M;u._RF.push({},"fc2ec9WrMtDMpLFLIYYsf3x","SceneMaster",void 0);var k,O=i.ccclass,w=i.property;!function(e){e[e.Game=1]="Game",e[e.Over=2]="Over"}(k||(k={}));e("SceneMaster",(f=O("SceneMaster"),v=w({type:d}),y=w({type:a}),g=w({type:a}),I=w({type:a}),f(((M=function(e){function t(){for(var t,o=arguments.length,u=new Array(o),i=0;i<o;i++)u[i]=arguments[i];return(t=e.call.apply(e,[this].concat(u))||this).GameStateCrt=k.Game,n(t,"UIPanelPunish",A,r(t)),n(t,"Camera3dNode",S,r(t)),n(t,"CubeGroup",T,r(t)),n(t,"CubeGroupRoot",L,r(t)),t._cubeArr=[],t._cubeGroupChoose=void 0,t._cubeChoose=void 0,t._checkTouchCube=!1,t._lastCubeArr=void 0,t._lastCubeSon=void 0,t}o(t,e);var u=t.prototype;return u.onLoad=function(){t.Ins=this},u.start=function(){this.createCubeGroup(),this.registerUIEvent()},u.registerUIEvent=function(){_.Instance.Camera3dRotate.on("Camera3dRotate",this.onCameraRatate,this),_.Instance.GetRandomLayer.on("GetRandomLayer",this.onGetRandomLayer,this),_.Instance.ChooseColorCube.on("ChooseColorCube",this.onChooseColorCube,this),_.Instance.ResetGame.on("ResetGame",this.onResetGame,this),s.on(c.EventType.TOUCH_MOVE,this.onTouchCube,this)},u.onCameraRatate=function(e){console.log("旋转按下");var t=new h;h.fromAxisAngle(t,C.UNIT_Y,e),this.Camera3dNode.rotate(t)},u.onGetRandomLayer=function(e){console.log("层数"+e),this._cubeGroupChoose=this._cubeArr[e],this._cubeGroupChoose.ChangeCubeColor()},u.GetLayerCube=function(e){return this._cubeArr[e]},u.onChooseColorCube=function(e){this._cubeChoose=this._cubeGroupChoose.GetCube(e),this._cubeChoose.getComponent(l).useGravity=!1,this._checkTouchCube=!0},u.onTouchCube=function(e){0!=this._checkTouchCube&&(this._cubeChoose.node.translate(new C(-.5,0,0)),this._cubeChoose.node.position.x<-13&&(this._cubeChoose.TankOut=!0,this._cubeGroupChoose.ChangeCubeColor(b.BLACK),this._checkTouchCube=!1,this._cubeChoose.getComponent(l).useGravity=!0,_.Instance.TakeOutCubeComplete.emit("TakeOutCubeComplete")))},u.createCubeGroup=function(){for(var e=0;e<_.CubeLayerMax;e++){var t=p(this.CubeGroup),o=new C(0,1.6*e,0),n=new C(0,e%2==0?90:0,0),r=t.getComponent(G);t.setParent(this.CubeGroupRoot),r.SetMass(30*(_.CubeLayerMax-e)),r.SetPosRot(o,n),this._cubeArr.push(r)}this._lastCubeArr=this._cubeArr[this._cubeArr.length-1],this._lastCubeSon=this._lastCubeArr.GetCube(0)},u.update=function(e){this.checkGameOver()},u.checkGameOver=function(){this.GameStateCrt==k.Game&&(this._lastCubeSon.node.worldPosition.y<30&&(this.GameStateCrt=k.Over,this.UIPanelPunish.node.active=!0,this.UIPanelPunish.ShowPunish()))},u.onResetGame=function(){for(var e=0;e<this._cubeArr.length;e++){this._cubeArr[e].node.destroy()}this._cubeArr=[],this.createCubeGroup(),_.Instance.TakeOutCubeComplete.emit("TakeOutCubeComplete"),this.GameStateCrt=k.Game},t}(m)).Ins=void 0,A=t((P=M).prototype,"UIPanelPunish",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=t(P.prototype,"Camera3dNode",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=t(P.prototype,"CubeGroup",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=t(P.prototype,"CubeGroupRoot",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=P))||R));u._RF.pop()}}}));

System.register("chunks:///_virtual/SingletonT.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){"use strict";var t,e;return{setters:[function(n){t=n.createClass},function(n){e=n.cclegacy}],execute:function(){n("SingletonF",(function(){var n=function(){function n(){}return t(n,null,[{key:"Instance",get:function(){return null==n._instance&&(n._instance=new this),n._instance}}]),n}();return n._instance=void 0,n})),e._RF.push({},"5f459SBS5dIponTFH9FlDfY","SingletonT",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/UIPanelFight.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GlobalEventM.ts","./SceneMaster.ts"],(function(t){"use strict";var e,o,n,a,i,r,s,h,c;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,n=t._decorator,a=t.Label,i=t.Node,r=t.Button,s=t.Component},function(t){h=t.GlobalEventM},function(t){c=t.SceneMaster}],execute:function(){var u;o._RF.push({},"b94c4nWaSBMK5SqQ+nI6VFB","UIPanelFight",void 0);var l=n.ccclass;n.property,t("UIPanelFight",l("UIPanelFight")(u=function(t){function o(){for(var e,o=arguments.length,n=new Array(o),a=0;a<o;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this)._rotateCameraL=void 0,e._rotateCameraR=void 0,e._rotateSp=.05,e._rotateV=void 0,e._rotateDown=void 0,e._cubeLayerNum=void 0,e._cubeLayerLbl=void 0,e._colorBtn=void 0,e._redBtn=void 0,e._greenBtn=void 0,e._blueBtn=void 0,e._colorBtnArr=[],e._promptLbl=void 0,e._computeTimeMax=50,e._computeTime=0,e}e(o,t);var n=o.prototype;return n.onLoad=function(){this._cubeLayerLbl=this.node.getChildByName("LayerLbl").getComponent(a),this._rotateCameraL=this.node.getChildByName("RotateCameraL"),this._rotateCameraR=this.node.getChildByName("RotateCameraR"),this._rotateCameraL.on(i.EventType.TOUCH_START,this.onRotateCamera,this),this._rotateCameraR.on(i.EventType.TOUCH_START,this.onRotateCamera,this),this._rotateCameraL.on(i.EventType.TOUCH_END,this.onRotateCameraEnd,this),this._rotateCameraR.on(i.EventType.TOUCH_END,this.onRotateCameraEnd,this),this._rotateCameraL.on(i.EventType.TOUCH_CANCEL,this.onRotateCameraEnd,this),this._rotateCameraR.on(i.EventType.TOUCH_CANCEL,this.onRotateCameraEnd,this),this._colorBtn=this.node.getChildByName("ColorBtn"),this._redBtn=this._colorBtn.getChildByName("RedBtn"),this._greenBtn=this._colorBtn.getChildByName("GreenBtn"),this._blueBtn=this._colorBtn.getChildByName("BlueBtn"),this._colorBtnArr.push(this._redBtn,this._greenBtn,this._blueBtn),this._redBtn.on(r.EventType.CLICK,this.onClickColorBtn,this),this._greenBtn.on(r.EventType.CLICK,this.onClickColorBtn,this),this._blueBtn.on(r.EventType.CLICK,this.onClickColorBtn,this),this._promptLbl=this.node.getChildByName("PromptLbl").getComponent(a),console.log("111",this._promptLbl)},n.onRotateCamera=function(t){var e=t.currentTarget;this._rotateV=e==this._rotateCameraL?-this._rotateSp:this._rotateSp,this._rotateDown=!0},n.onRotateCameraEnd=function(t){this._rotateDown=!1},n.rotateEvent=function(){},n.start=function(){h.Instance.TakeOutCubeComplete.on("TakeOutCubeComplete",this.onGetCubeLayer,this),this.GetCubeLayer()},n.onGetCubeLayer=function(){this._promptLbl.string="",this._colorBtn.active=!1,this.GetCubeLayer()},n.GetCubeLayer=function(){this._computeTime=0,this._cubeLayerLbl.node.active=!0,this.schedule(this.computeCubeLayer,.03)},n.computeCubeLayer=function(){if(this._computeTime++,this._cubeLayerNum=Math.floor(Math.random()*(h.CubeLayerMax-5)),this._cubeLayerLbl.string=(1+this._cubeLayerNum).toString()+"层",this._computeTime==this._computeTimeMax){this.unschedule(this.computeCubeLayer);for(var t=c.Ins.GetLayerCube(this._cubeLayerNum).GetSonArr(),e=0;e<t.length;e++){var o=t[e];this._colorBtnArr[e].active=!o.TankOut,console.log(111111,o)}h.Instance.GetRandomLayer.emit("GetRandomLayer",this._cubeLayerNum),this.showColorBtn()}},n.showColorBtn=function(){this._promptLbl.string="按下对应颜色选择要抽取的积木",this._colorBtn.active=!0},n.onClickColorBtn=function(t){var e=0;switch(t.node){case this._redBtn:e=0;break;case this._greenBtn:e=1;break;case this._blueBtn:e=2}this._cubeLayerLbl.node.active=!1,this._promptLbl.string="滑动屏幕任意处将积木拖出",this._colorBtn.active=!1,h.Instance.ChooseColorCube.emit("ChooseColorCube",e)},n.update=function(t){this._rotateDown&&h.Instance.Camera3dRotate.emit("Camera3dRotate",this._rotateV)},o}(s))||u);o._RF.pop()}}}));

System.register("chunks:///_virtual/UIPanelPunish.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ConfigManager.ts","./GlobalEventM.ts"],(function(n){"use strict";var t,e,o,s,i,r,a,u,c,l,h;return{setters:[function(n){t=n.inheritsLoose,e=n.asyncToGenerator,o=n.regeneratorRuntime},function(n){s=n.cclegacy,i=n._decorator,r=n.Label,a=n.Button,u=n.Component},function(n){c=n.ConfigManager,l=n.ConfigName},function(n){h=n.GlobalEventM}],execute:function(){var p;s._RF.push({},"014f12wqPhJBqPtDQGBXRVU","UIPanelPunish",void 0);var f=i.ccclass;i.property,n("UIPanelPunish",f("UIPanelPunish")(p=function(n){function s(){for(var t,e=arguments.length,o=new Array(e),s=0;s<e;s++)o[s]=arguments[s];return(t=n.call.apply(n,[this].concat(o))||this)._punishLbl=void 0,t._sureBtn=void 0,t}t(s,n);var i=s.prototype;return i.onLoad=function(){this._punishLbl=this.node.getChildByPath("panel/ContentLbl").getComponent(r),this._sureBtn=this.node.getChildByPath("panel/SureBtn"),this._sureBtn.on(a.EventType.CLICK,this.onClickSure,this)},i.onClickSure=function(){this.node.active=!1,h.Instance.ResetGame.emit("ResetGame")},i.ShowPunish=function(){var n=e(o().mark((function n(){var t,e,s,i;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c.Instance.GetCsvData(l.Punish);case 2:t=n.sent,console.log(t.length),e=Math.floor(Math.random()*t.length),console.log(e),s=t[e],console.log(s),i=s.Punish,this._punishLbl.string=i,console.log("惩罚",i);case 11:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}(),i.update=function(n){},s}(u))||p);s._RF.pop()}}}));
